<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<style>
			canvas{
				background:#eee;
			}
		</style>
	</head>
	<body>111111111111
		<canvas id='c3' width='500' height='400'></canvas>
		
		
		
		
		
		
		<script>
		var c3= document.getElementById('c3')
		var ctx = c3.getContext('2d')

			var xhr=new XMLHttpRequest;
			xhr.onreadystatechange=function(){
				if(xhr.readyState==4 && xhr.status==200){
					var res = JSON.parse(xhr.response)
					var w=50;
					var h=0;
					var x=50;
					var y=0;
					for(var arr of res){
						h=arr.value
						y=400-h
						var r=Math.random()*255;
						var g=Math.random()*255;
						var b=Math.random()*255;
						ctx.fillStyle=`rgb(${r},${g},${b})`
						ctx.fillRect(x,y,w,h)
						var str = arr.name;
						ctx.font='23px sans-serif';
						ctx.textBaseline='top'
						ctx.fillText(str,x,y-30)
						x+=100;
// 						var obj = ctx.measureText(str)
// 						console.log(obj)
// 						ctx.fillText(str,500-obj.width,0)
					}
					
				}
			}
			xhr.open('get','http://127.0.0.1:0728/search/sales');
			xhr.send(null)
		</script>
	</body>
</html>
